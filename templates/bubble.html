{% extends 'base.html' %}
{% block title %}App Contributions to Customer Success{% endblock %}

{% block content %}

  <!-- jQuery -->
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js"></script>
  <script src="/static/js/call_by_date.js"></script>

<h1>App Contributions to Customer Success</h1>
<div class="row">
  <!-- /.col-lg-4 -->
  <div class="col-lg-4">
    <canvas id="myChart" width="400" height="400"></canvas>
    <script>
    var ctx = document.getElementById("myChart");
    var myChart = new Chart(ctx, {
        type: 'bubble',
        data: {
            labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
            datasets: [
            {% for app in app_contributions %}
              {
                label: "{{ app['app_name'] }}",
                data: [
                    {
                        x: {{ app['ltv'] }},
                        y: {{ app['arpu'] }},
                        r: {{ app['retention'] }}
                    },
                ],
              },
            {% endfor %}
            {
            label: 'First Dataset',
            data: [
                {
                    x: 20,
                    y: 30,
                    r: 15
                },
            ],
            backgroundColor:"#FF6384",
            hoverBackgroundColor: "#FF6384",
        }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        }
    });
    </script>
  </div>
</div>

{% endblock %}
